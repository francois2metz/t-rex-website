

<!DOCTYPE html>
<html>
<head>
  
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <link rel="icon" href="/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">

  
  <title>t-rex (dev) - Configuration Reference</title>
  <link rel="stylesheet" type="text/css" href="https://t-rex.tileserver.ch/dev/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="https://t-rex.tileserver.ch/dev/site.css">

  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

  <script src="https://t-rex.tileserver.ch/dev/semantic.min.js"></script>
  <script src="https://t-rex.tileserver.ch/dev/site.js"></script>

  <style type="text/css">
    div.pusher div.ui.red.inverted.vertical.masthead.center.aligned.segment {
      background: url(https://t-rex.tileserver.ch/dev/t-rex-ascii.svg) no-repeat 0 0em;
    }
    div.ui.large.top.fixed.red.inverted.menu {
      background: url(https://t-rex.tileserver.ch/dev/t-icon-white.png) no-repeat 10px 10px #cc0000;      
    }
  </style>

</head>
<body>


<div class="ui large top fixed hidden red inverted menu">
  <div class="ui container">
    <div class="right menu">
      
  
  
  <a class=" item" href="https://t-rex.tileserver.ch/dev/">Home</a>
  <a class="active item" href="https://t-rex.tileserver.ch/dev/doc/">Documentation</a>

    </div>
  </div>
</div>


<div class="ui vertical red inverted sidebar menu">
  
  
  
  <a class=" item" href="https://t-rex.tileserver.ch/dev/">Home</a>
  <a class="active item" href="https://t-rex.tileserver.ch/dev/doc/">Documentation</a>

</div>


<div class="pusher">
  <div class="ui red inverted vertical masthead center aligned segment">

    <div class="ui container">
      <div class="ui large secondary inverted pointing menu">
        <a class="toc item">
          <i class="sidebar icon"></i>
        </a>
        <div class="right item">
          
  
  
  <a class=" item" href="https://t-rex.tileserver.ch/dev/">Home</a>
  <a class="active item" href="https://t-rex.tileserver.ch/dev/doc/">Documentation</a>

        </div>
      </div>
    </div>

    <div class="ui text container">
      <h1 class="ui inverted header">
      t-rex (dev)
      </h1>
      <h2>Create and serve your own vector tiles</h2>
    </div>

  </div>

  
<div id="contentgrid" class="ui grid">
  <div id="toc" class="three wide large screen only teal inverted column">
    
  <ul>
  
  
    
      <li>
        <a class="active" href="https://t-rex.tileserver.ch/dev/doc/reference/#configuration-reference">Configuration Reference</a>
        
          <ul>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#service">service</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#datasource">datasource</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#grid">grid</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#tileset">tileset</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#cache">cache</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/reference/#webserver">webserver</a>
              </li>
            
          </ul>
        
      </li>
    
  
    
      <li>
        <a class="" href="https://t-rex.tileserver.ch/dev/doc/configuration/#configuration">Configuration</a>
        
          <ul>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/configuration/#layer-configuration">Layer configuration</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/configuration/#custom-tile-grids">Custom tile grids</a>
              </li>
            
          </ul>
        
      </li>
    
  
    
      <li>
        <a class="" href="https://t-rex.tileserver.ch/dev/doc/generate/#generating-vector-tiles">Generating vector tiles</a>
        
          <ul>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/generate/#cache-generation">Cache generation</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/generate/#usage">Usage</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/generate/#drilldown">Drilldown</a>
              </li>
            
          </ul>
        
      </li>
    
  
    
      <li>
        <a class="" href="https://t-rex.tileserver.ch/dev/doc/serve/#serving-vector-tiles">Serving vector tiles</a>
        
          <ul>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/serve/#usage">Usage</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/serve/#server-options">Server options</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/serve/#production-environments">Production environments</a>
              </li>
            
          </ul>
        
      </li>
    
  
    
      <li>
        <a class="" href="https://t-rex.tileserver.ch/dev/doc/setup/#setup">Setup</a>
        
          <ul>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/setup/#installation">Installation</a>
              </li>
            
              <li>
                <a href="https://t-rex.tileserver.ch/dev/doc/setup/#upgrading">Upgrading</a>
              </li>
            
          </ul>
        
      </li>
    
  
  </ul>

  </div>
  <div class="thirteen wide olive inverted column">
    <h1 id="configuration-reference">Configuration Reference</h1>
<h2 id="service">service</h2>
<h3 id="mvt">mvt</h3>
<p>Mapbox Vector Tile service.</p>
<p><code>viewer</code>: true | false</p>
<p>Enable/Disable built-in viewer</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">service.mvt</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">viewer </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">true
</span></pre><h2 id="datasource">datasource</h2>
<p><code>name</code>: string</p>
<p>Name of datasource</p>
<p><code>default</code>: true | false</p>
<p>Use as default datasource when no name is given in layer datasource.</p>
<p>If no datasource is marked as <code>default</code>, the first one will be used.</p>
<p><code>dbconn</code>: &lt;Rust-Postgres connection URL&gt;</p>
<p>DB connection URL in the form &quot;<code>postgres://user:pass@host:port/database</code>&quot;.</p>
<p><code>pass</code> may be omitted if not needed. <code>port</code> defaults to <code>5432</code> and <code>database</code> defaults to the value of <code>user</code> if not specified. The driver supports <code>trust</code>, <code>password</code>, and <code>md5</code> authentication. Unix domain sockets can be used as well. The <code>host</code> portion of the URI should be set to the absolute path to the directory containing the socket file.</p>
<p>Special URI characters (even in the password!) have to be <a href="https://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters">percent encoded</a>. See Rust-Postgres <a href="https://github.com/sfackler/rust-postgres/tree/postgres-v0.15.2#connecting">connection</a> for more details.</p>
<p><code>pool</code>: integer</p>
<p>Connection pool size.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">datasource</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">name </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;buildings&quot;
</span><span style="background-color:#272822;color:#f92672;">dbconn </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;postgresql://postgres@127.0.0.1/osm_buildings&quot;
</span></pre>
<p><code>path</code>: <file path or GDAL datasource spec></p>
<p>GDAL datasource specification.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">datasource</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">name </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;natural_earth&quot;
</span><span style="background-color:#272822;color:#f92672;">path </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;natural_earth.gpkg&quot;
</span></pre><h2 id="grid">grid</h2>
<p><code>predefined</code>: &quot;web_mercator&quot; | &quot;wgs84&quot;</p>
<p>Use a built-in grid.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">grid</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">predefined </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;web_mercator&quot;
</span></pre><h3 id="user">user</h3>
<p>Custom grid definition.</p>
<p><code>width</code>: integer</p>
<p>Width of an individual tile in pixels.</p>
<p><code>height</code>: integer</p>
<p>Height of an individual tile in pixels.</p>
<p><code>extent</code>: { minx: float, miny: float, maxx: float, maxy: float }</p>
<p>Geographical extent covered by the grid, in ground units (e.g. meters, degrees, feet, etc.).</p>
<p>The (minx,miny) point defines the origin of the grid, i.e. the pixel at the bottom left of the
bottom-left most tile is always placed on the (minx,miny) geographical point.
The (maxx,maxy) point is used to determine how many tiles there are for each zoom level.</p>
<p><code>srid</code>: number</p>
<p>Spatial reference system (PostGIS SRID).</p>
<p><code>units</code> : &quot;m&quot; | &quot;dd&quot; | &quot;ft&quot;</p>
<p>Grid units (m: meters, dd: decimal degrees, ft: feet)</p>
<p><code>resolutions</code>: [float, ...]</p>
<p>List of resolutions for each of the zoom levels defined by the grid, ordered from largest to smallest.</p>
<p>The largest value will correspond to the grid’s zoom level 0. Resolutions
are expressed in “units-per-pixel”, depending on the unit used by the grid
(e.g. resolutions are in meters per pixel for most grids used in webmapping).</p>
<p><code>origin</code>: &quot;TopLeft&quot; | &quot;BottomLeft&quot;</p>
<p>Grid origin</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">grid.user</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">width </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">256
</span><span style="background-color:#272822;color:#f92672;">height </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">256
</span><span style="background-color:#272822;color:#f92672;">extent </span><span style="background-color:#272822;color:#f8f8f2;">= { </span><span style="background-color:#272822;color:#f92672;">minx </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">2420000.0</span><span style="background-color:#272822;color:#f8f8f2;">, </span><span style="background-color:#272822;color:#f92672;">miny </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">1030000.0</span><span style="background-color:#272822;color:#f8f8f2;">, </span><span style="background-color:#272822;color:#f92672;">maxx </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">2900000.0</span><span style="background-color:#272822;color:#f8f8f2;">, </span><span style="background-color:#272822;color:#f92672;">maxy </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">1350000.0 </span><span style="background-color:#272822;color:#f8f8f2;">}
</span><span style="background-color:#272822;color:#f92672;">srid </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">2056
</span><span style="background-color:#272822;color:#f92672;">units </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;m&quot;
</span><span style="background-color:#272822;color:#f92672;">resolutions </span><span style="background-color:#272822;color:#f8f8f2;">= [</span><span style="background-color:#272822;color:#ae81ff;">4000.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">3750.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">3500.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">3250.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">3000.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2750.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2500.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2250.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2000.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1750.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1500.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1250.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1000.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">750.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">650.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">500.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">250.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">100.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">50.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">20.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">10.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">5.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2.5</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">2.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1.5</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">1.0</span><span style="background-color:#272822;color:#f8f8f2;">,</span><span style="background-color:#272822;color:#ae81ff;">0.5</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">origin </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;TopLeft&quot;
</span></pre><h2 id="tileset">tileset</h2>
<p><code>name</code>: string</p>
<p>Tileset name.</p>
<p><code>extent</code>: { minx: float, miny: float, maxx: float, maxy: float }</p>
<p>Extent covered by tileset.</p>
<p><code>minzoom</code>: integer</p>
<p>Minimum zoom level for which tiles are available (Default: 0).<br />
If unset, minzoom is deduced from layer and query minzoom limits.</p>
<p><code>maxzoom</code>: integer</p>
<p>Maximum zoom level for which tiles are available (Default: 22).<br />
If unset, maxzoom is deduced from layer and query maxzoom limits.<br />
Viewers use data from tiles at the maxzoom when displaying the map at higher zoom levels.</p>
<p><code>center</code>: float, float</p>
<p>Longitude, latitude of map center (in WGS84).<br />
Viewers can use this value to set the default location.</p>
<p><code>start_zoom</code>: integer</p>
<p>Start zoom level. Must be between <code>minzoom</code> and <code>maxzoom</code>.</p>
<p><code>cache_limits</code>: { minzoom: integer, maxzoom: integer, no_cache: boolean }</p>
<p>Optional limits of zoom levels which should be cached. Tiles in other zoom levels,
or all if <code>no_cache</code> is <code>true</code>, are served from live data.</p>
<p>Default: <code>cache_limits = {minzoom = 0, maxzoom = 22, no_cache = false}</code></p>
<p><code>attribution</code>: string</p>
<p>Acknowledgment of ownership, authorship or copyright.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">tileset</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">name </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;osm&quot;
</span><span style="background-color:#272822;color:#f92672;">attribution </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;© OpenStreetMap contributors&quot;
</span></pre><h3 id="layer">layer</h3>
<p><code>name</code>: string</p>
<p>Layer name.</p>
<p><code>datasource</code>: string</p>
<p>Name of datasource (see <code>[[datasource]]</code>). Default datasource is used, when name is undefined.</p>
<p><code>geometry_field</code>: string</p>
<p>Name of geometry field.</p>
<p><code>geometry_type</code>:  &quot;POINT&quot; | &quot;MULTIPOINT&quot; | &quot;LINESTRING&quot; | &quot;MULTILINESTRING&quot; | &quot;POLYGON&quot; | &quot;MULTIPOLYGON&quot; | &quot;COMPOUNDCURVE&quot; | &quot;CURVEPOLYGON&quot;</p>
<p>Type of geometry in PostGIS database or in GDAL layer.<br />
Curve geometry types are supported for PostGIS layers only.</p>
<p><code>srid</code>: integer</p>
<p>Spatial reference system (PostGIS SRID).<br />
For GDAL layers this setting is ignored and always determined from the data source.</p>
<p><code>no_transform</code>: true | false</p>
<p>Handle geometries as they were in grid SRS (Default: false).</p>
<p><code>fid_field</code>: string</p>
<p>Field name to be used as the feature ID.</p>
<p><code>table_name</code>: string</p>
<p>Name of database table or GDAL layer.</p>
<p><code>query_limit</code>: integer</p>
<p>Maximal number of features to read for a single tile.</p>
<p><code>minzoom</code>: integer</p>
<p>Minimum zoom level for which tiles are available (Default: 0).<br />
If unset, minzoom is deduced from query minzoom limits.</p>
<p><code>maxzoom</code>: integer</p>
<p>Maximum zoom level for which tiles are available.<br />
If unset, maxzoom is deduced from query maxzoom limits.</p>
<p><code>tile_size</code>: integer</p>
<p>Width and height of the tile (Default: 4096. Grid default size is 256)</p>
<p><code>simplify</code>: true | false</p>
<p>Simplify geometry (lines and polygons). Can be overridden in a layer's query configuration.</p>
<p>Supported for PostGIS layer only.</p>
<p><code>tolerance</code>: string</p>
<p>Simplification tolerance (Default: !pixel_width!/2). Can be overridden in a layer's query configuration.</p>
<p>Supported for PostGIS layer only.</p>
<p><code>buffer_size</code>: integer</p>
<p>Tile buffer size in pixels.<br />
When undefined, line and polygon geometries are not clipped.<br />
Supported for PostGIS layer only.</p>
<p><code>make_valid</code>: true | false</p>
<p>Fix invalid geometries (lines and polygons) before clipping. (Default: false)<br />
Supported for PostGIS layer only.</p>
<p><code>shift_longitude</code>: true | false</p>
<p>Apply <code>ST_ShiftLongitude</code> to (transformed) bbox. (Default: false)
Supported for PostGIS layer only.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">tileset.layer</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">name </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;points&quot;
</span><span style="background-color:#272822;color:#f92672;">datasource </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;natural_earth&quot;
</span><span style="background-color:#272822;color:#75715e;"># Select all attributes of table:
</span><span style="background-color:#272822;color:#f92672;">table_name </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;ne_10m_populated_places&quot;
</span><span style="background-color:#272822;color:#f92672;">geometry_field </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;wkb_geometry&quot;
</span><span style="background-color:#272822;color:#f92672;">geometry_type </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;POINT&quot;
</span></pre><h4 id="query">query</h4>
<p><code>minzoom</code>: integer</p>
<p>Minimal zoom level for using this query.</p>
<p><code>maxzoom</code>: integer</p>
<p>Maximal zoom level for using this query.</p>
<p><code>simplify</code>: true | false</p>
<p>Simplify geometry (lines and polygons). Overrides layer simplification, if set.</p>
<p>Supported for PostGIS layer only.</p>
<p><code>tolerance</code>: string</p>
<p>Simplification tolerance. Overrides layer simplification, if set.</p>
<p>Supported for PostGIS layer only.</p>
<p><code>sql</code>: string</p>
<p>Explicit SQL query.</p>
<p>The following variables are replaced at runtime:</p>
<ul>
<li><code>!bbox!</code>: Bounding box of tile</li>
<li><code>!zoom!</code>: Zoom level of tile request</li>
<li><code>!scale_denominator!</code>: Map scale of tile request</li>
<li><code>!pixel_width!</code>: Width of pixel in grid units</li>
</ul>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">tileset.layer.query</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">minzoom </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">17
</span><span style="background-color:#272822;color:#f92672;">maxzoom </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">22
</span><span style="background-color:#272822;color:#f92672;">sql </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;&quot;&quot;
</span><span style="background-color:#272822;color:#e6db74;">  </span><span style="background-color:#272822;color:#e6db74;">SELECT name, type, osm_id, geometry
</span><span style="background-color:#272822;color:#e6db74;">  </span><span style="background-color:#272822;color:#e6db74;">FROM osm_buildings
</span><span style="background-color:#272822;color:#e6db74;">  </span><span style="background-color:#272822;color:#e6db74;">WHERE geometry &amp;&amp; !bbox!&quot;&quot;&quot;
</span></pre><h2 id="cache">cache</h2>
<p>Either tile cache is stored in local filesystem (<a href="https://t-rex.tileserver.ch/dev/doc/reference/#file">file</a>) or in S3 object storage (<a href="https://t-rex.tileserver.ch/dev/doc/reference/#s3">S3</a>).</p>
<h3 id="file">file</h3>
<p>File system based tile cache.</p>
<p>Directory layout: <code>&lt;base path&gt;/&lt;tileset name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.pbf</code></p>
<p><code>base</code>: string</p>
<p>Base path for storing tiles.</p>
<p><code>baseurl</code>: string</p>
<p>Base URL of tile cache server published in metadata.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">cache.file</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">base </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;/var/cache/mvtcache&quot;
</span></pre><h3 id="s3">S3</h3>
<p>S3 object storage based tile cache.</p>
<p>Directory layout: <code>&lt;endpoint&gt;/&lt;bucket&gt;/&lt;key_prefix&gt;/&lt;tileset name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.pbf</code></p>
<p><code>endpoint</code>: string</p>
<p>S3 service endpoint for storing tiles.</p>
<p><code>bucket</code>: string</p>
<p>S3 bucket.</p>
<p><code>access_key</code>: string</p>
<p>Access key for S3.</p>
<p><code>secret_key</code>: string</p>
<p>Secret key for S3.</p>
<p><code>region</code>: string</p>
<p>S3 region.</p>
<p><code>key_prefix</code>: string</p>
<p>Key prefix for storing files, optional. If omitted tileset is stored in bucket root.</p>
<p><code>baseurl</code>: string</p>
<p>Base URL of tile cache server published in metadata.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">cache.s3</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">endpoint </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;http://localhost:9000&quot;
</span><span style="background-color:#272822;color:#f92672;">bucket </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;trex&quot;
</span><span style="background-color:#272822;color:#f92672;">access_key </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;my-access-key&quot;
</span><span style="background-color:#272822;color:#f92672;">secret_key </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;my-secret-key&quot;
</span><span style="background-color:#272822;color:#f92672;">region </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;my-region&quot;
</span><span style="background-color:#272822;color:#f92672;">key_prefix </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;my-prefix&quot;
</span></pre><h2 id="webserver">webserver</h2>
<p><code>bind</code>: &quot;&lt;IP adress&gt;&quot;</p>
<p>IP address of interface to bind web server (<code>0.0.0.0</code> for all).</p>
<p>Default: <code>127.0.0.1</code></p>
<p><code>port</code>: integer</p>
<p>Web server port number.</p>
<p>Default: <code>6767</code></p>
<p><code>threads</code>: integer</p>
<p>Number of parallel web server threads. Defaults to number of available logical CPUs.</p>
<p><code>cache_control_max_age</code>: integer</p>
<p>Cache-Control headers set by web server.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[</span><span style="background-color:#272822;color:#a6e22e;">webserver</span><span style="background-color:#272822;color:#f8f8f2;">]
</span><span style="background-color:#272822;color:#f92672;">bind </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;0.0.0.0&quot;
</span><span style="background-color:#272822;color:#f92672;">port </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#ae81ff;">8080
</span></pre><h3 id="static">static</h3>
<p><code>dir</code>: string</p>
<p>Directory to serve static files from.</p>
<p><code>path</code>: string</p>
<p>HTTP path for accessing static files.</p>
<p>Example:</p>
<pre style="background-color:#272822">
<span style="background-color:#272822;color:#f8f8f2;">[[</span><span style="background-color:#272822;color:#a6e22e;">webserver.static</span><span style="background-color:#272822;color:#f8f8f2;">]]
</span><span style="background-color:#272822;color:#f92672;">dir </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;./public/&quot;
</span><span style="background-color:#272822;color:#f92672;">path </span><span style="background-color:#272822;color:#f8f8f2;">= </span><span style="background-color:#272822;color:#e6db74;">&quot;/static&quot;
</span></pre>

    <div class="ui grid">
      <div class="ui seven wide column left aligned">
      
      </div>
      <div class="ui two wide column center aligned">
        <a href="https://github.com/t-rex-tileserver/t-rex-website/edit/master/content/doc/reference.md">Edit page <i class="write icon"></i></a>
      </div>
      <div class="ui seven wide column right aligned">
      
      </div>
    </div>
  </div>
</div>


  
  <div class="ui red inverted vertical footer segment">
    <div class="ui container">
      <div class="ui stackable inverted divided equal height stackable grid">
        <div class="three wide column">
          <h4 class="ui inverted header">Development</h4>
          <div class="ui inverted link list">
            <a href="https://github.com/t-rex-tileserver/t-rex/" class="item">Github</a>
            <a href="https://github.com/t-rex-tileserver/t-rex/blob/master/CHANGELOG.md" class="item">Changelog</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Usage</h4>
          <div class="ui inverted link list">
            <a href="https://github.com/t-rex-tileserver/t-rex/releases/latest" class="item">Download</a>
            <a href="https://t-rex.tileserver.ch/dev/doc/" class="item">Documentation</a>
          </div>
        </div>
        <div class="seven wide column">
          <h4 class="ui inverted header">t-rex (dev)</h4>
          <div class="ui inverted link list">
            <p class="item">Copyright &copy; 2016-2021 by Pirmin Kalberer</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  

  
  

</div>

</body>

</html>
